<script setup>
import { computed, reactive } from 'vue';
import { usePostsStore } from '@/stores/posts';
import { useRouter } from 'vue-router';
import Wrapper from '@/components/Wrapper.vue';

const postStore = usePostsStore();

const router = useRouter();

const post = reactive({
    title: '',
    body: ''
});

const invalidForm = computed(() => {
  return post.title === '' || post.body === '';
});

const submit = () => {
  postStore.addPost(post)
  router.push({ name: 'home'});
}
</script>

<template>
    <Wrapper>
        <form @submit.prevent="submit">
            <h3>How's your'e day?</h3>
            <div>
                <label>Add emotions</label>
                <input type="text" v-model="post.title"/>
            </div>
            <div>
                <label>Today's Experience</label>
                <textarea rows="5" v-model="post.body"></textarea>
            </div>
            <div>
                <button :disabled="invalidForm">Submit</button>
            </div>
        </form>
    </Wrapper>
</template>


<style lang="scss" scoped>
  form {
    /* Remove background, border-radius, and box-shadow */
    padding: 2rem 2.5rem;
    width: 100%;
    max-width: 500px;

    h3 {
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      color: #333;
    }

    div {
      margin-bottom: 1.2rem;

      label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #555;
      }

      input,
      textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 1rem;
        background-color: #fafafa;
        transition: border-color 0.3s;

        &:focus {
          border-color: #007bff;
          outline: none;
          background-color: #fff;
        }
      }

      button {
        padding: 0.75rem 1.5rem;
        background-color: #007bff;
        color: #fff;
        font-size: 1rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;

        &:hover {
          background-color: #0056b3;
        }
      }
      button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
      }
    }
  }
</style>